webpackJsonp([1],{KXGv:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("NERu"),n={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"courseTitle"},[s("span",[e._v(e._s(this.$route.query.courseName))]),e._v(" "),s("el-button",{attrs:{type:"primary",plain:!e.isBatch},on:{click:function(t){e.isBatch=!0}}},[e._v("批量录入")]),e._v(" "),s("el-button",{attrs:{type:"success",plain:e.isBatch},on:{click:function(t){e.isBatch=!1}}},[e._v("逐题录入")])],1),e._v(" "),s("div",{staticClass:"filter"},[s("transition",[s("div",{directives:[{name:"show",rawName:"v-show",value:e.isBatch,expression:"isBatch"}]},[s("div",[e._v("\n  \t\t  \t\t\t试题分类："),s("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.showClasses()}}},[e._v(e._s(e.categoryShowName))]),e._v(" "),s("label",[e._v("题型：")]),e._v(" "),s("el-select",{staticStyle:{width:"120px"},attrs:{size:"mini"},on:{change:e.changeQuesType},model:{value:e.batchData.quesType,callback:function(t){e.$set(e.batchData,"quesType",t)},expression:"batchData.quesType"}},e._l(e.quesTypeList,function(e){return s("el-option",{key:e.quesType,attrs:{label:e.name,value:e.quesType}})}),1),e._v(" "),s("label",[e._v("难度：")]),e._v(" "),s("el-select",{staticStyle:{width:"120px"},attrs:{size:"mini"},model:{value:e.batchData.level,callback:function(t){e.$set(e.batchData,"level",t)},expression:"batchData.level"}},e._l(e.queLevels,function(e){return s("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),e._v(" "),s("label",{directives:[{name:"show",rawName:"v-show",value:"4"==e.batchData.quesType,expression:"batchData.quesType=='4'"}]},[e._v("主/客观：")]),e._v(" "),s("el-select",{directives:[{name:"show",rawName:"v-show",value:"4"==e.batchData.quesType,expression:"batchData.quesType=='4'"}],staticStyle:{width:"120px"},attrs:{size:"mini"},model:{value:e.diffType,callback:function(t){e.diffType=t},expression:"diffType"}},[s("el-option",{attrs:{label:"客观题",value:1}}),e._v(" "),s("el-option",{attrs:{label:"主观题",value:2}})],1),e._v(" "),s("el-button",{staticStyle:{float:"right"},attrs:{plain:"",type:"primary"},on:{click:e.saveQueBatch}},[e._v("保存试题")])],1),e._v(" "),s("div",{staticClass:"quesArea"},[s("div",{staticClass:"inputArea"},[s("p",[e._v("输入区 "),s("el-button",{attrs:{plain:"",size:"mini",type:"primary"},on:{click:function(t){e.quesRuleVisible=!0}}},[e._v("查看示例")])],1),e._v(" "),s("textarea",{ref:"textInput",attrs:{rows:"6",cols:"60"},on:{input:e.markDownUpdate}})]),e._v(" "),s("div",{staticClass:"viewArea"},[s("p",[e._v("检查区 "),e.mistakeCount?s("span",[e._v("共"),s("b",[e._v(" "+e._s(e.mistakeCount)+" ")]),e._v("处错误")]):e._e()]),e._v(" "),s("div",{ref:"preview"})])])])]),e._v(" "),s("transition",[s("div",{directives:[{name:"show",rawName:"v-show",value:!e.isBatch,expression:"!isBatch"}]},[s("EditQues",{attrs:{defaultSet:e.defaultConfig,quesCategory:e.quesCategory}})],1)])],1),e._v(" "),s("QuesRuleTips",{attrs:{quesRuleVisible:e.quesRuleVisible,quesType:e.batchData.quesType},on:{closeDiolog:e.closeTips}}),e._v(" "),s("el-dialog",{attrs:{title:"提示",width:"600px",visible:e.showTips},on:{"update:visible":function(t){e.showTips=t}}},[e._v("\n          更换题型会清空当前编辑，确定更换吗？\n          "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{plain:""},on:{click:function(t){e.showTips=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{plain:"",type:"primary"},on:{click:e.quesTypeChange}},[e._v("确 定")])],1)]),e._v(" "),s("category",{ref:"cg",on:{"category-parent":e.categoryParent}})],1)},staticRenderFns:[]};var a=function(e){s("gryb")},o=s("VU/8")(i.a,n,!1,a,"data-v-71837bec",null);t.default=o.exports},LQJC:function(e,t){},NERu:function(module,__webpack_exports__,__webpack_require__){"use strict";(function($){var __WEBPACK_IMPORTED_MODULE_0__common_util__=__webpack_require__("vG4S"),__WEBPACK_IMPORTED_MODULE_1__components_pagination__=__webpack_require__("spLH"),__WEBPACK_IMPORTED_MODULE_2__assets_css_question_import_css__=__webpack_require__("uDt+"),__WEBPACK_IMPORTED_MODULE_2__assets_css_question_import_css___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__assets_css_question_import_css__),__WEBPACK_IMPORTED_MODULE_3__components_questionBand_quesRuleTips__=__webpack_require__("XJos"),__WEBPACK_IMPORTED_MODULE_4__components_questionBand_editQues__=__webpack_require__("vyLD"),__WEBPACK_IMPORTED_MODULE_5__components_questionBand_category__=__webpack_require__("aETM"),__WEBPACK_IMPORTED_MODULE_6__common_api__=__webpack_require__("w7XY");__webpack_exports__.a={data:function(){return{isBatch:!0,quesRuleVisible:!1,showTips:!1,defaultConfig:__WEBPACK_IMPORTED_MODULE_0__common_util__.b.editorConfig,mistakeCount:0,courseName:"",batchData:{quesType:"1",oldQueType:1,level:"1"},courseId:this.$route.query.courseId,queType:1,quesTypeList:[{quesType:"1",name:"单选题"},{quesType:"2",name:"多选题"},{quesType:"3",name:"判断题"},{quesType:"4",name:"填空题"},{quesType:"5",name:"简答题"}],queLevels:[{id:"1",name:"1"},{id:"2",name:"2"},{id:"3",name:"3"},{id:"4",name:"4"},{id:"5",name:"5"}],categoryShowName:"请选择分类",categoryShowId:"",diffType:2}},computed:{},methods:{dateChange:function(e){this.queryForm.startTime=e[0],this.queryForm.endTime=e[1]},markDownUpdate:function(e){qt_type=this.batchData.quesType,e.target.editor.update()},checkCategory:function(e){this.batchData.category=e,this.showClasses=!1},changeQuesType:function(){""!=this.$refs.textInput.value&&(this.showTips=!0)},quesTypeChange:function(){this.$refs.textInput.value="",this.$refs.preview.innerHTML="",this.showTips=!1,this.mistakeCount=0},closeTips:function(){this.quesRuleVisible=!1},saveQueBatch:function(){var e=this,t=this.$refs.preview.querySelector(".question");if(this.mistakeCount=t.querySelectorAll(".qt_error, .error, .check_error").length,this.mistakeCount>0)this.$message.error("试题编辑不正确，请检查");else{var s=this.serializeFn();if(console.log(s),""!==s){Object(__WEBPACK_IMPORTED_MODULE_6__common_api__.b)("/testques/testques/batchSaveTestques",s).then(function(t){200===t.data.code?(e.$message.success("成功添加试题"),e.$refs.textInput.value="",e.$refs.preview.innerHTML=""):e.$message({message:t.data.message,type:"error"})}).catch(function(e){console.log(e)})}else this.$message.error("试题分值不能为空")}},showClasses:function(){this.$refs.cg.classesDialog(this.courseId)},serializeFn:function serializeFn(){var data=[];return this.$refs.preview.querySelectorAll(".question").forEach(function(element,index){var question=element.querySelector(".qt_title").innerHTML;if("1"==qt_type||"2"==qt_type)var option1=element.querySelector(".key_A")?element.querySelector(".key_A").innerHTML:"",answerFlag1=$(".key_A").find("input").is(":checked")?"1":"0",option2=element.querySelector(".key_B")?element.querySelector(".key_B").innerHTML:"",answerFlag2=$(".key_B").find("input").is(":checked")?"1":"0",option3=element.querySelector(".key_C")?element.querySelector(".key_C").innerHTML:"",answerFlag3=$(".key_C").find("input").is(":checked")?"1":"0",option4=element.querySelector(".key_D")?element.querySelector(".key_D").innerHTML:"",answerFlag4=$(".key_D").find("input").is(":checked")?"1":"0",option5=element.querySelector(".key_E")?element.querySelector(".key_E").innerHTML:"",answerFlag5=$(".key_E").find("input").is(":checked")?"1":"0",option6=element.querySelector(".key_F")?element.querySelector(".key_F").innerHTML:"",answerFlag6=$(".key_F").find("input").is(":checked")?"1":"0",option7=element.querySelector(".key_G")?element.querySelector(".key_G").innerHTML:"",answerFlag7=$(".key_G").find("input").is(":checked")?"1":"0",option8=element.querySelector(".key_H")?element.querySelector(".key_H").innerHTML:"",answerFlag8=$(".key_H").find("input").is(":checked")?"1":"0";var answer=answer=element.querySelector(".qt_answer").innerHTML,analysis=element.querySelector(".qt_analysis")?element.querySelector(".qt_analysis").innerHTML:"",score=element.querySelector(".qt_score").querySelector("input").value;""!==analysis&&(analysis=analysis.split("</span>")[1]),""!==answer&&(answer=answer.split("</span>")[1]);var simple={};if("1"==qt_type||"2"==qt_type){answer=element.querySelector(".qt_answer").innerHTML.toUpperCase();for(var options=[],i=1;i<=8;i++){var optionConent=eval("option"+i),answerFlag=eval("answerFlag"+i);""!==optionConent&&(optionConent=optionConent.split("</span>")[1],options.push({optionContent:optionConent,answerFlag:answerFlag,sort:i+1}))}simple.options=options,simple.answer=""}else if("3"==qt_type){var options=[];answer=element.querySelector(".qt_answer").innerHTML.replace(/(正确|对)/,1).replace(/(错误|错)/,0),answer.indexOf("正确")>=0||answer.indexOf("对")>=0?(options.push({optionContent:"正确",answerFlag:1,sort:1}),options.push({optionContent:"错误",answerFlag:0,sort:2})):(options.push({optionContent:"错误",answerFlag:1,sort:2}),options.push({optionContent:"正确",answerFlag:0,sort:1})),simple.options=options}else if("4"==qt_type){answer=element.querySelector(".qt_answer").innerHTML.replace(/(，|,)/,"&<gap@>");var number=question.split("_____").length-1;simple.spaceNum=number,simple.answer=answer}else answer=answer;if(simple.content=question.split("</span>")[1],simple.answerAnalysis=analysis,simple.courseId=this.courseId,""===score)return"";simple.score=score,simple.diffType=this.diffType,simple.difficultyLevel=this.batchData.level,simple.typeId="200"+this.batchData.quesType,""!=this.categoryShowId&&(simple.classifyId=this.categoryShowId),data.push({simple:simple,type:0})}.bind(this)),data},categoryParent:function(e,t){this.categoryShowName=t,this.categoryShowId=e}},mounted:function(){new __WEBPACK_IMPORTED_MODULE_0__common_util__.a(this.$refs.textInput,this.$refs.preview)},components:{Pagination:__WEBPACK_IMPORTED_MODULE_1__components_pagination__.a,QuesRuleTips:__WEBPACK_IMPORTED_MODULE_3__components_questionBand_quesRuleTips__.a,EditQues:__WEBPACK_IMPORTED_MODULE_4__components_questionBand_editQues__.a,category:__WEBPACK_IMPORTED_MODULE_5__components_questionBand_category__.a}}}).call(__webpack_exports__,__webpack_require__("7t+N"))},Q4Sr:function(e,t,s){"use strict";var i={data:function(){return{}},props:{viewData:{type:Array,default:[]},areaHeight:{type:String,default:"500"}},watch:{areaHeight:function(e,t){this.$refs.viewContainer.style.height=e}},methods:{editQue:function(e){this.$emit("editOneQue",e)},deleteQue:function(e){this.viewData.splice(e,1)}}},n={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"viewContainer"},e._l(e.viewData,function(t,i){return s("div",{staticClass:"quesView"},[s("div",{staticClass:"margin-b10 font-size16 color-33"},[e._v(e._s(t.typeName))]),e._v(" "),s("div",{staticClass:"quesTitle clear"},[s("samp",[e._v(e._s(i+1)+".")]),e._v(" "),s("div",{domProps:{innerHTML:e._s(t.content)}})]),e._v(" "),1001==t.parentTypeId||1002==t.parentTypeId?s("div",[1001==t.parentTypeId?s("ul",{staticClass:"options"},e._l(t.options,function(t,i){return s("li",{class:1==t.answerFlag?"active clear":"clear"},[s("samp",[e._v(e._s(String.fromCharCode(i+65)))]),e._v(" "),s("div",{domProps:{innerHTML:e._s(t.optionContent)}})])}),0):e._e(),e._v(" "),1002==t.parentTypeId?s("ul",{staticClass:"options"},e._l(t.options,function(t,i){return s("li",{class:1==t.answerFlag?"active clear":"clear"},[s("samp",{staticStyle:{"border-radius":"0"}},[e._v(e._s(String.fromCharCode(i+65)))]),e._v(" "),s("div",{domProps:{innerHTML:e._s(t.optionContent)}})])}),0):e._e()]):e._e(),e._v(" "),1003==t.parentTypeId?s("div",[s("div",{staticClass:"answer"},[e._v("答案：\n            "),e._l(t.options,function(t){return[1==t.answerFlag&&"正确"==t.optionContent?s("i",{staticClass:"el-icon-check"}):e._e(),e._v(" "),1==t.answerFlag&&"错误"==t.optionContent?s("i",{staticClass:"el-icon-close"}):e._e()]})],2)]):e._e(),e._v(" "),1004==t.parentTypeId?s("div",[s("div",{staticClass:"answerTk"},[s("samp",[e._v("答案：")]),e._v(" "),s("ul",e._l(t.answer.split("&<multi@>"),function(t,i){return s("li",[s("div",{staticClass:"orderInx"},[e._v(e._s(i+1))]),e._v(" "+e._s(t))])}),0)])]):e._e(),e._v(" "),1005==t.parentTypeId?s("div",[s("div",{staticClass:"answer"},[s("samp",[e._v("答案：")]),e._v(" "),s("div",{domProps:{innerHTML:e._s(t.answer)}})])]):e._e(),e._v(" "),1006==t.parentTypeId||1007==t.parentTypeId?s("div",[1007==t.parentTypeId?s("div",[s("video",{attrs:{src:t.file}})]):e._e(),e._v(" "),e._l(t.subSimple,function(t,i){return s("div",{staticClass:"smallQue"},["1001"==t.parentTypeId||"1002"==t.parentTypeId?s("div",[s("div",{staticClass:"quesTitle clear"},[s("samp",[e._v(e._s(i+1)+"、["+e._s("1002"==t.parentTypeId?"多选题":"单选题")+"]")]),e._v(" "),s("div",{domProps:{innerHTML:e._s(t.content)}})]),e._v(" "),"1001"==t.parentTypeId?s("ul",{staticClass:"options"},e._l(t.options,function(t,i){return s("li",{class:1==t.answerFlag?"active clear":"clear"},[s("samp",[e._v(e._s(String.fromCharCode(i+65)))]),e._v(" "),s("div",{domProps:{innerHTML:e._s(t.optionContent)}})])}),0):e._e(),e._v(" "),1002==t.parentTypeId?s("ul",{staticClass:"options"},e._l(t.options,function(t,i){return s("li",{class:1==t.answerFlag?"active clear":"clear"},[s("samp",{staticStyle:{"border-radius":"0"}},[e._v(e._s(String.fromCharCode(i+65)))]),e._v(" "),s("div",{domProps:{innerHTML:e._s(t.optionContent)}})])}),0):e._e()]):e._e(),e._v(" "),"1003"==t.parentTypeId?s("div",[s("div",{staticClass:"quesTitle clear"},[s("samp",[e._v(e._s(i+1)+"、[判断题]")]),e._v(" "),s("div",{domProps:{innerHTML:e._s(t.content)}})]),e._v(" "),s("div",{staticClass:"answer"},[e._v("答案： \n                    "),e._l(t.options,function(t){return[1==t.answerFlag&&"正确"==t.optionContent?s("i",{staticClass:"el-icon-check"}):e._e(),e._v(" "),1==t.answerFlag&&"错误"==t.optionContent?s("i",{staticClass:"el-icon-close"}):e._e()]})],2)]):e._e(),e._v(" "),"1004"==t.parentTypeId?s("div",[s("div",{staticClass:"quesTitle clear"},[s("samp",[e._v(e._s(i+1)+"、[填空题]")]),e._v(" "),s("div",{domProps:{innerHTML:e._s(t.content)}})]),e._v(" "),s("div",{staticClass:"answerTk"},[s("samp",[e._v("答案：")]),e._v(" "),s("ul",e._l(t.answer.split("&<multi@>"),function(t,i){return s("li",[s("div",{staticClass:"orderInx"},[e._v(e._s(i+1))]),e._v(" "+e._s(t))])}),0)])]):e._e(),e._v(" "),"1005"==t.parentTypeId?s("div",[s("div",{staticClass:"quesTitle clear"},[s("samp",[e._v(e._s(i+1)+"、[简答题]")]),e._v(" "),s("div",{domProps:{innerHTML:e._s(t.content)}})]),e._v(" "),s("div",{staticClass:"answer"},[s("samp",[e._v("答案：")]),e._v(" "),s("div",{domProps:{innerHTML:e._s(t.answer)}})])]):e._e(),e._v(" "),s("div",{staticClass:"analysis clear"},[s("samp",[e._v("解析：")]),s("div",{domProps:{innerHTML:e._s(t.answerAnalysis||"无")}})]),e._v(" "),s("p",[e._v("分值： "+e._s(t.score)+" 分")]),e._v(" "),t.parentTypeId<6?s("p",[e._v("难度： "+e._s(t.difficultyLevel)+"        试题分类： "+e._s(t.classifyName||""))]):e._e()])})],2):e._e(),e._v(" "),1001==t.parentTypeId||1002==t.parentTypeId||1003==t.parentTypeId||1004==t.parentTypeId||1005==t.parentTypeId?s("div",{staticClass:"analysis clear"},[s("samp",[e._v("解析：")]),s("div",{domProps:{innerHTML:e._s(t.answerAnalysis||"无")}})]):e._e(),e._v(" "),s("p",[e._v("分值： "+e._s(t.score)+" 分")]),e._v(" "),1001==t.parentTypeId||1002==t.parentTypeId||1003==t.parentTypeId||1004==t.parentTypeId||1005==t.parentTypeId?s("p",[e._v("难度： "+e._s(t.difficultyLevel)+"        试题分类： "+e._s(t.classifyName||""))]):e._e()])}),0)},staticRenderFns:[]};var a=s("VU/8")(i,n,!1,function(e){s("LQJC")},"data-v-47dc66db",null);t.a=a.exports},Vsmk:function(e,t){},XJos:function(e,t,s){"use strict";var i={data:function(){return{tipShow:{},tipDatas:[{title:"单选题",ruleLines:["题号支持1.和1、和(1)三种格式。","选项支持A.和A、两种格式，最多支持 8 个选项。","请空格输入（），()。","答案中请勿加分隔符或空格"],examples:["1. Don't（）unknown files on the Internet.","A、downloads","B、download","C、down","D、load","答案：D","解析：not后跟动词原形(若无解析本行可不填)"]},{title:"多选题",ruleLines:["题号支持1.和1、和(1)三种格式。","选项支持A.和A、两种格式，最多支持 8 个选项。","答案中请勿加分隔符或空格"],examples:["1. The followings can beclassfied as off-balance sheet business are","A、Deposits","B、Trust Consulting","C、L/C","D、Agency","答案：BCD","解析：(若无解析本行可不填)"]},{title:"判断题",ruleLines:["题号支持1.和1、(1）三种格式。","答案支持正确、错误，对、错，true、false三种格式","请点击Tab键输入空格"],examples:["1. Everyone was in his room when the bell rings？","答案：正确","解析：(若无解析本行可不填)"]},{title:"填空题",ruleLines:["题号支持1.和1、(1）三种格式。","答案若有多空，请使用双竖线 ||（shift+) 分隔，若一个空格有多个答案，多个答案中间但竖线隔开","请空格输入（），()。"],examples:["1.We （） going to sing some songs （） our firends.","答案：are，were|for","解析：(若无解析本行可不填)"]},{title:"简答题",ruleLines:["题号支持1.和1、(1）三种格式。","人工判卷"],examples:["1. What is Product literature？","答案：Product literature is a primary subset of business publishing specifically geared toward the selection, purchase and use of a business' products.Typically this includes product promotionally literature, product datasheets, product operating manuals and product purchase terms and conditions.","解析：(若无解析本行可不填)"]},{title:"综合题",ruleLines:["题号支持1.和1、(1）三种格式。","小题支持单选题、多选题、判断题、填空题、简答题"],examples:["1. 小红出国到美国，由于出行不方便，在只有中国驾照情况下在美国驾驶机动车。","（1）小红的驾照能否在国外合法驾驶车辆？","A、可以","B、驾车不合法","C、通用","D、不可以","答案：D","解析：请仔细阅读交规(若无解析本行可不填)","（2）外国交规与中国是否一致？","A、一样","B、怎样都可以","C、无所谓吧","D、大致一样，但驾照不能通用","答案：D","解析：请仔细阅读国际交规 (若无解析本行可不填)"]}]}},props:["quesType","quesRuleVisible"],methods:{openFunc:function(){this.quesType&&(this.tipShow=this.tipDatas[parseInt(this.quesType)-1])},save:function(){},close:function(){this.$emit("closeDiolog",!1)}}},n={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-dialog",{attrs:{title:"例题示范",width:"600px",visible:e.quesRuleVisible,"before-close":e.close},on:{"update:visible":function(t){e.quesRuleVisible=t},open:e.openFunc}},[s("div",{staticClass:"typeTitle"},[e._v(e._s(e.tipShow.title))]),e._v(" "),s("dl",[s("dt",[e._v("输入规范")]),e._v(" "),e._l(e.tipShow.ruleLines,function(t,i){return s("dd",[e._v(e._s(i+1)+"、"+e._s(t))])})],2),e._v(" "),s("dl",[s("dt",[e._v("输入范例")]),e._v(" "),e._l(e.tipShow.examples,function(t,i){return s("dd",[e._v(e._s(t))])})],2)])},staticRenderFns:[]};var a=s("VU/8")(i,n,!1,function(e){s("YJdH")},"data-v-2223c802",null);t.a=a.exports},YJdH:function(e,t){},ZDTw:function(e,t,s){"use strict";var i={name:"VueUEditor",props:{ueditorPath:{type:String,default:"/static/ue/"},ueditorConfig:{type:Object,default:function(){return{}}},ueditorId:{type:Number,default:-1}},data:function(){return{randomId:"editor_"+1e17*Math.random(),instance:null,scriptTagStatus:0}},created:function(){void 0!==window.UE?(this.scriptTagStatus=2,this.initEditor()):this.insertScriptTag()},beforeDestroy:function(){null!==this.instance&&this.instance.destroy&&this.instance.destroy()},methods:{insertScriptTag:function(){var e=this,t=document.getElementById("editorScriptTag"),s=document.getElementById("configScriptTag");if(null===t){(s=document.createElement("script")).type="text/javascript",s.src=this.ueditorPath+"neditor.config.js",s.id="configScriptTag",(t=document.createElement("script")).type="text/javascript",t.src=this.ueditorPath+"neditor.all.js",t.id="editorScriptTag";var i=document.getElementsByTagName("head")[0];i.appendChild(s),i.appendChild(t)}s.loaded?this.scriptTagStatus++:s.addEventListener("load",function(){e.scriptTagStatus++,s.loaded=!0,e.initEditor()}),t.loaded?this.scriptTagStatus++:t.addEventListener("load",function(){e.scriptTagStatus++,t.loaded=!0,e.initEditor()}),this.initEditor()},initEditor:function(){var e=this;2===this.scriptTagStatus&&null===this.instance&&(this.$nextTick(function(){e.instance=window.UE.getEditor(e.randomId,e.ueditorConfig),e.instance.ueditorId=e.ueditorId,e.instance.addListener("ready",function(){e.$emit("ready",e.instance)})}),this.insertPluginScriptTab())},insertPluginScriptTab:function(){var e=document.getElementById("kfDialogScriptTag"),t=document.getElementById("kfContentScriptTag"),s=document.getElementById("filterFixScriptTag");(e=document.createElement("script")).type="text/javascript",e.src=this.ueditorPath+"kityformula-plugin/addKityFormulaDialog.js",e.id="kfDialogScriptTag",(t=document.createElement("script")).type="text/javascript",t.src=this.ueditorPath+"kityformula-plugin/getKfContent.js",t.id="kfContentScriptTag",(s=document.createElement("script")).type="text/javascript",s.src=this.ueditorPath+"kityformula-plugin/defaultFilterFix.js",s.id="kfContentScriptTag";var i=document.getElementsByTagName("head")[0];i.appendChild(e),i.appendChild(t),i.appendChild(s)}}},n={render:function(){var e=this.$createElement;return(this._self._c||e)("script",{attrs:{id:this.randomId,name:"content",type:"text/plain"}})},staticRenderFns:[]},a=s("VU/8")(i,n,!1,null,null,null);t.a=a.exports},aETM:function(e,t,s){"use strict";var i=s("BO1k"),n=s.n(i),a=s("w7XY"),o={data:function(){return{quesCategory:[],showClasses:!1,courseId:"",newQuesCategory:[]}},methods:{mouse:function(e){this.newQuesCategory[e].moveShow=!0},leave:function(e){this.newQuesCategory[e].moveShow=!1},editCategory:function(e,t){for(var s in this.newQuesCategory)this.newQuesCategory[s].editorShow=!0;this.newQuesCategory[t].editorShow=!1},deleteCategory:function(e,t){var s=this;if(""===e)return this.quesCategory.splice(t,1),void this.newQuesCategory.splice(t,1);var i={};i.id=e;Object(a.b)("/testques/courseclassify/deleteCourseClassify",i).then(function(e){200===e.data.code?s.obtainClasses():s.$message({message:e.data.message,type:"error"})}).catch(function(e){console.log(e)})},addCategory:function(){for(var e in this.newQuesCategory){if(""===this.newQuesCategory[e].id)return;this.newQuesCategory[e].editorShow=!0}this.quesCategory.push({id:"",name:" ",testquesNum:0}),this.newQuesCategory.push({id:"",showName:" ",editorShow:!1,moveShow:!1})},checkCategory:function(e,t){this.showClasses=!1,this.$emit("category-parent",e,t)},editSaveCategory:function(e,t,s){var i=this;if(""===e){if(""===t)return void this.$message({message:"请输入分类名称",type:"error"});(r={}).courseId=this.courseId,r.name=t;var n="/testques/courseclassify/saveCourseClassify";Object(a.b)(n,r).then(function(e){200===e.data.code?i.obtainClasses():i.$message({message:e.data.message,type:"error"})}).catch(function(e){console.log(e)})}else{if(t===this.newQuesCategory[s].showName){for(var o in this.newQuesCategory)this.newQuesCategory[o].editorShow=!0;return}var r;(r={}).id=e,r.name=t;n="/testques/courseclassify/updateCourseClassify";Object(a.b)(n,r).then(function(e){200===e.data.code?i.obtainClasses():i.$message({message:e.data.message,type:"error"})}).catch(function(e){console.log(e)})}},obtainClasses:function(){var e=this,t="/testques/courseclassify/getCourseClassifyList/"+this.courseId;Object(a.a)(t).then(function(t){if(200===t.data.code){e.newQuesCategory=[];var s=!0,i=!1,a=void 0;try{for(var o,r=n()(t.data.data);!(s=(o=r.next()).done);s=!0){var l=o.value;e.newQuesCategory.push({id:l.id,showName:l.name,editorShow:!0,moveShow:!1})}}catch(e){i=!0,a=e}finally{try{!s&&r.return&&r.return()}finally{if(i)throw a}}e.quesCategory=t.data.data}else e.$message({message:t.data.message,type:"error"})}).catch(function(e){console.log(e)})},classesDialog:function(e){this.showClasses=!0,this.courseId=e,this.obtainClasses()}}},r={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-dialog",{attrs:{title:"试题分类",width:"400px",visible:e.showClasses},on:{"update:visible":function(t){e.showClasses=t}}},[e._l(e.quesCategory,function(t,i){return[s("div",{staticClass:"category-list-line",on:{mouseover:function(t){return e.mouse(i)},mouseout:function(t){return e.leave(i)}}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.newQuesCategory[i].editorShow,expression:"newQuesCategory[index].editorShow"}],staticClass:"category-list-line1",on:{click:function(s){return e.checkCategory(t.id,t.name)}}},[e._v(e._s(t.name))]),e._v(" "),s("el-input",{directives:[{name:"show",rawName:"v-show",value:!e.newQuesCategory[i].editorShow,expression:"!newQuesCategory[index].editorShow"}],staticClass:"category-list-line1 line-height50",model:{value:t.name,callback:function(s){e.$set(t,"name",s)},expression:"item.name"}}),e._v(" "),s("div",{staticClass:"category-list-line2"},[s("span",[e._v(e._s(t.testquesNum))]),e._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:e.newQuesCategory[i].moveShow||!e.newQuesCategory[i].editorShow,expression:"newQuesCategory[index].moveShow || !newQuesCategory[index].editorShow"}],staticStyle:{"margin-left":"50px"}},[0===t.testquesNum||"未分类"===t.name?[s("i",{directives:[{name:"show",rawName:"v-show",value:e.newQuesCategory[i].editorShow,expression:"newQuesCategory[index].editorShow"}],staticClass:"el-icon-edit",on:{click:function(s){return e.editCategory(t.id,i)}}}),e._v(" "),s("i",{directives:[{name:"show",rawName:"v-show",value:!e.newQuesCategory[i].editorShow,expression:"!newQuesCategory[index].editorShow"}],staticClass:"el-icon-check color-3a font-w",on:{click:function(s){return e.editSaveCategory(t.id,t.name,i)}}}),e._v(" "),s("i",{staticClass:"el-icon-delete",on:{click:function(s){return e.deleteCategory(t.id,i)}}})]:[s("i",{staticClass:"el-icon-edit color-e5",attrs:{disabled:""}}),e._v(" "),s("i",{staticClass:"el-icon-delete color-e5",attrs:{disabled:""}})]],2)])],1)]}),e._v(" "),s("div",[s("span",{staticClass:"color-3a add-category",on:{click:e.addCategory}},[e._v("添加分类")])])],2)},staticRenderFns:[]};var l=s("VU/8")(o,r,!1,function(e){s("Vsmk")},null,null);t.a=l.exports},dD0O:function(e,t){},gryb:function(e,t){},"uDt+":function(e,t){},vyLD:function(e,t,s){"use strict";var i=s("BO1k"),n=s.n(i),a=s("ZDTw"),o={data:function(){return{typeCount:{radioCount:0,checkboxCount:0,panduanCount:0,tiankongCount:0,jiandaCount:0}}},props:["dialogVisible"],methods:{openFunc:function(){this.formData&&(this.queryForm=this.formData)},scoreChange:function(e){Number(e)<0&&(e=0),Number(e)>100&&(e=100),event.target.value=e},save:function(){this.$emit("addUnitQue",this.typeCount),this.typeCount={radioCount:0,checkboxCount:0,panduanCount:0,tiankongCount:0,jiandaCount:0}},close:function(){this.typeCount={radioCount:0,checkboxCount:0,panduanCount:0,tiankongCount:0,jiandaCount:0},this.$emit("closeDiolog",!1)}}},r={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-dialog",{attrs:{title:"添加小题",width:"250px",visible:e.dialogVisible,"before-close":e.close},on:{"update:visible":function(t){e.dialogVisible=t},open:e.openFunc}},[s("el-form",{ref:"typeCount",attrs:{model:e.typeCount,"label-width":"80px","label-position":"right"}},[s("el-form-item",{attrs:{label:"单选题：",prop:"radioCount"}},[s("el-input",{attrs:{type:"number",min:"0",max:"100"},on:{change:e.scoreChange},model:{value:e.typeCount.radioCount,callback:function(t){e.$set(e.typeCount,"radioCount",t)},expression:"typeCount.radioCount"}}),e._v(" 道\n        ")],1),e._v(" "),s("el-form-item",{attrs:{label:"多选题：",prop:"checkboxCount"}},[s("el-input",{attrs:{type:"number",min:"0",max:"100"},on:{change:e.scoreChange},model:{value:e.typeCount.checkboxCount,callback:function(t){e.$set(e.typeCount,"checkboxCount",t)},expression:"typeCount.checkboxCount"}}),e._v(" 道\n        ")],1),e._v(" "),s("el-form-item",{attrs:{label:"判断题：",prop:"panduanCount"}},[s("el-input",{attrs:{type:"number",min:"0",max:"100"},on:{change:e.scoreChange},model:{value:e.typeCount.panduanCount,callback:function(t){e.$set(e.typeCount,"panduanCount",t)},expression:"typeCount.panduanCount"}}),e._v(" 道\n        ")],1),e._v(" "),s("el-form-item",{attrs:{label:"填空题：",prop:"tiankongCount"}},[s("el-input",{attrs:{type:"number",min:"0",max:"100"},on:{change:e.scoreChange},model:{value:e.typeCount.tiankongCount,callback:function(t){e.$set(e.typeCount,"tiankongCount",t)},expression:"typeCount.tiankongCount"}}),e._v(" 道\n        ")],1),e._v(" "),s("el-form-item",{attrs:{label:"简答题：",prop:"jiandaCount"}},[s("el-input",{attrs:{type:"number",min:"0",max:"100"},on:{change:e.scoreChange},model:{value:e.typeCount.jiandaCount,callback:function(t){e.$set(e.typeCount,"jiandaCount",t)},expression:"typeCount.jiandaCount"}}),e._v(" 道\n        ")],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:e.close}},[e._v("取消")]),e._v(" "),s("el-button",{attrs:{type:"primary",plain:""},on:{click:e.save}},[e._v("确定")])],1)],1)},staticRenderFns:[]};var l=s("VU/8")(o,r,!1,function(e){s("dD0O")},"data-v-25a9e810",null).exports,c=s("aETM"),u=s("Q4Sr"),p=s("w7XY"),d={data:function(){return{queType:1,queTypeId:"",showClasses:!1,selectOptions:["","","",""],answer:"",score:"2",tiankongTitle:"",pdAnswer:"1",category:"",level:"1",diffType:"2",courseId:this.$route.query.courseId,complexQues:[],fileList:[],areaHeight:"",previewQues:[],levels:[{id:"1",name:"1"},{id:"2",name:"2"},{id:"3",name:"3"},{id:"4",name:"4"},{id:"5",name:"5"}],testQuesTypeDropDownList:[],showAddSmallQue:!1,currentComplexInx:0,isComplexCategory:!1,categoryShowName:"请选择分类",categoryShowId:"",editIndex:""}},props:["defaultSet","quesCategory"],components:{UE:a.a,AddSmallQues:l,Quesview:u.a,category:c.a},methods:{saveOneQuestion:function(){if(this.checkVaild()){if(""!=this.categoryShowId&&this.categoryShowName,1==this.queType||2==this.queType){var e=!0;if(1===this.queType)g=this.answer.charCodeAt(0)-65;else for(var t in this.answer=this.answer.split(""),this.answer)this.answer[t]=this.answer[t].charCodeAt(0)-65;if(this.selectOptions.forEach(function(t,s){if(1===this.queType){var i=0;g===s&&(i=1),this.selectOptions[s]={optionContent:this.$refs.option[s].getHtmlContent(),answerFlag:i,sort:s+1}}else{i=0;var a=!0,o=!1,r=void 0;try{for(var l,c=n()(this.answer);!(a=(l=c.next()).done);a=!0){l.value===s&&(i=1)}}catch(e){o=!0,r=e}finally{try{!a&&c.return&&c.return()}finally{if(o)throw r}}this.selectOptions[s]={optionContent:this.$refs.option[s].getHtmlContent(),answerFlag:i,sort:s+1}}""==this.selectOptions[s]&&(this.$message.error("选项内容不能为空"),e=!1)}.bind(this)),e){var s={typeId:this.queTypeId,content:this.$refs.simpleXzTitle.getHtmlContent(),courseId:this.courseId,options:this.selectOptions,answerAnalysis:this.$refs.analysis.getHtmlContent(),difficultyLevel:this.level,score:this.score,diffType:1,classifyName:this.categoryShowName};""!==this.categoryShowId&&(s.classifyId=this.category);var i={simple:s,type:0};this.saveSubmit(i)}}else if(3==this.queType){var a=[];1===this.pdAnswer?(a.push({optionContent:"正确",answerFlag:1,sort:1}),a.push({"optionContent ":"错误",answerFlag:0,sort:2})):(a.push({optionContent:"正确",answerFlag:0,sort:1}),a.push({optionContent:"错误",answerFlag:1,sort:2}));var o={typeId:this.queTypeId,content:this.$refs.simplePdTitle.getHtmlContent(),courseId:this.courseId,options:a,answerAnalysis:this.$refs.analysis.getHtmlContent(),difficultyLevel:this.level,score:this.score,diffType:1,classifyName:this.categoryShowName};""!==this.categoryShowId&&(o.classifyId=this.categoryShowId);i={simple:o,type:0};this.saveSubmit(i)}else if(4==this.queType){var r="";for(var l in this.tiankongAnswer)l<this.tiankongAnswer.length-1?r+=this.tiankongAnswer[l].content+"&<multi@>":r+=this.tiankongAnswer[l].content;var c={typeId:this.queTypeId,content:this.$refs.simpleTkTitle.getHtmlContent(),courseId:this.courseId,answer:r,answerAnalysis:this.$refs.analysis.getHtmlContent(),difficultyLevel:this.level,score:this.score,diffType:this.diffType,classifyName:this.categoryShowName};""!==this.categoryShowId&&(c.classifyId=this.categoryShowId);i={simple:c,type:0};this.saveSubmit(i)}else if(5==this.queType){var u={typeId:this.queTypeId,content:this.$refs.simpleJdTitle.getHtmlContent(),courseId:this.courseId,answer:this.answer,answerAnalysis:this.$refs.analysis.getHtmlContent(),difficultyLevel:this.level,score:this.score,diffType:1,classifyName:this.categoryShowName};""!==this.categoryShowId&&(u.classifyId=this.categoryShowId);i={simple:u,type:0};this.saveSubmit(i)}else if(6==this.queType||7==this.queType){var p=[],d=0,h=!0,v=!1,_=void 0;try{for(var f,m=n()(this.complexQues);!(h=(f=m.next()).done);h=!0){var y=f.value;if(d++,1==y.type){var g=y.answer.charCodeAt(0)-65,w=[];for(var C in y.options){var T=0;g==C&&(T=1),w.push({optionContent:y.options[C],answerFlag:T,sort:parseInt(C)+1})}var b={typeId:"2001",parentTypeId:"1001",content:y.title,options:w,courseId:this.courseId,answerAnalysis:y.analysis,score:this.score,sort:d,diffType:1};p.push(b)}else if(2==y.type){T=0;var q=y.answer.split("");for(var x in q)q[x]=q[x].charCodeAt(0)-65;w=[];for(var k in y.options){var S=!0,I=!1,Q=void 0;try{for(var $,E=n()(q);!(S=($=E.next()).done);S=!0){$.value==k&&(T=1)}}catch(e){I=!0,Q=e}finally{try{!S&&E.return&&E.return()}finally{if(I)throw Q}}w.push({optionContent:y.options[k],answerFlag:T,sort:parseInt(C)+1})}var D={typeId:"2002",parentTypeId:"1002",content:y.title,options:w,courseId:this.courseId,answerAnalysis:y.analysis,score:y.score,sort:d,diffType:1};p.push(D)}else if(3==y.type){a=[];1===y.answer?(a.push({optionContent:"正确",answerFlag:1,sort:1}),a.push({"optionContent ":"错误",answerFlag:0,sort:2})):(a.push({optionContent:"正确",answerFlag:0,sort:1}),a.push({optionContent:"错误",answerFlag:1,sort:2}));var A={typeId:"2003",parentTypeId:"1003",content:y.title,courseId:this.courseId,options:a,answerAnalysis:y.analysis,score:y.score,sort:d,diffType:1};p.push(A)}else if(4==y.type){for(r="",l=0;l<y.answer.length;l++)l<y.answer.length-1?r+=y.answer[l].content+"&<multi@>":r+=y.answer[l].content;var L={typeId:"2004",parentTypeId:"1004",courseId:this.courseId,content:y.title,answer:r,answerAnalysis:y.analysis,score:y.score,sort:d,diffType:1};p.push(L)}else if(5==y.type){var O={typeId:"2005",parentTypeId:"1005",content:y.title,courseId:this.courseId,answer:y.answer,answerAnalysis:y.analysis,score:y.score,sort:d,diffType:2};p.push(O)}}}catch(e){v=!0,_=e}finally{try{!h&&m.return&&m.return()}finally{if(v)throw _}}var H=1,F=!0,M=!1,P=void 0;try{for(var N,B=n()(p);!(F=(N=B.next()).done);F=!0){var U=N.value;if("2004"==U.typeId&&2==U.diffType){H=2;break}if("2005"==U.typeId){H=2;break}}}catch(e){M=!0,P=e}finally{try{!F&&B.return&&B.return()}finally{if(M)throw P}}if(2==H)for(var l in p)p[l].diffType=2;var R={typeId:this.queTypeId,parentTypeId:"100"+this.queType,courseId:this.courseId,content:this.$refs.simpleZhTitle.getHtmlContent(),subSimple:p,difficultyLevel:this.level,score:this.complexScore,diffType:H,classifyName:this.categoryShowName};""!==this.categoryShowId&&(R.classifyId=this.categoryShowId);var j={complex:R,type:1};this.saveSubmit(j)}}},saveSubmit:function(e){var t=this,s=e;Object(p.b)("/testques/testques/saveTestques",e).then(function(e){200===e.data.code?(t.$message.success("成功添加试题"),t.resetQue(t.queType),7==t.queType||6==t.queType?t.updateQue(s.complex):t.updateQue(s.simple)):t.$message({message:e.data.message,type:"error"})}).catch(function(e){console.log(e)})},addOneQuestion:function(){this.selectOptions.push("")},addOneOptionComplex:function(e){e.options.push("")},setTiankongTitle:function(e,t){if(t||0===t){var s=this.complexQues[t];s.title=e,s.answer=this.formatTKAnswer(e)}else this.tiankongTitle=e},setJdAnswer:function(e,t){t||0===t?this.complexQues[t].answer=e:this.answer=e},chooseOptionAnswer:function(e){var t=String.fromCharCode(e+65);if(1==this.queType)this.answer=t;else if(2==this.queType)if(""==this.answer)this.answer=t;else if(this.answer.includes(t)){this.answer.indexOf(t)>0?this.answer=this.answer.replace(t,""):(this.answer.length,this.answer=this.answer.replace(t,"")),this.answer=this.sortString(this.answer)}else this.answer+=t,this.answer=this.sortString(this.answer)},chooseOptionAnswerComplex:function(e,t){var s=String.fromCharCode(e+65);if(1==t.type)t.answer=s;else if(2==t.type){if(""==t.answer)t.answer=s;else if(t.answer.includes(s)){t.answer.indexOf(s)>0?t.answer=t.answer.replace(s,""):(t.answer.length,t.answer=t.answer.replace(s,"")),t.answer=this.sortString(t.answer)}else t.answer+=s,t.answer=this.sortString(t.answer);console.log(t)}},addUnitQue:function(e){for(var t=0;t<Number(e.radioCount);t++)this.complexQues.push({type:"1",title:"",answer:"",options:["","","",""],analysis:"",score:2});for(var s=0;s<Number(e.checkboxCount);s++)this.complexQues.push({type:"2",title:"",answer:"",options:["","","",""],analysis:"",score:2});for(var i=0;i<Number(e.panduanCount);i++)this.complexQues.push({type:"3",title:"",answer:"1",analysis:"",score:2});for(var n=0;n<Number(e.tiankongCount);n++)this.complexQues.push({type:"4",title:"",answer:[],analysis:"",score:2,diffType:2});for(var a=0;a<Number(e.jiandaCount);a++)this.complexQues.push({type:"5",answer:"",analysis:"",score:2});console.log(this.complexQues),this.showAddSmallQue=!1},sortString:function(e){return e.split(",").sort().join(",")},scoreChange:function(e){"string"!=typeof e?(Number(e.score)<1&&(e.score=1),Number(e.score)>100&&(e.score=100)):(Number(this.score)<1&&(this.score=1),Number(this.score)>100&&(this.score=100))},closeDiolog:function(){this.showAddSmallQue=!1},formatTKAnswer:function(e){for(var t=new Array,s=e.split("_____").length-1,i=0;i<s;i++)t.push({index:i+1,content:""});return t},checkCategory:function(e){this.isComplexCategory?(this.complexQues[this.currentComplexInx].category=e,this.isComplexCategory=!1):this.category=e,this.showClasses=!1},showClassesBox:function(e){"number"==typeof e&&(this.currentComplexInx=e,this.isComplexCategory=!0),this.$refs.cg.classesDialog(this.courseId)},removeOption:function(e){this.selectOptions.length<=2?this.$message("至少保留两个选项"):(this.selectOptions.splice(e,1),this.answer="")},removeOptionComplex:function(e,t){var s=this.complexQues[e].options;s.length<=2?this.$message("至少保留两个选项"):(s.splice(t,1),this.complexQues[e].answer="")},beforeRemove:function(e,t){return this.$confirm("确定移除 "+e.name+"？")},handleChange:function(e,t){this.fileList=t},setComplexVal:function(){this.complexQues.forEach(function(e,t){4!=e.type&&(e.title=this.$refs["complexQuesTitle"+t][0].getHtmlContent()),e.analysis=this.$refs.analysisComplex[t].getHtmlContent(),1!=e.type&&2!=e.type||this.$refs["optionComplex"+t].forEach(function(t,s){e.options[s]=t.getHtmlContent()})}.bind(this))},upFileError:function(){this.$message.error("上传文件失败")},checkVaild:function(){var e=!0;switch(this.queType){case 1:this.$refs.simpleXzTitle.getHtmlContent().length<2?(this.$message.error("题目不能少于两个字"),e=!1):""==this.answer&&(this.$message.error("请选择答案选项"),e=!1);break;case 2:this.$refs.simpleXzTitle.getHtmlContent().length<2?(this.$message.error("题目不能少于两个字"),e=!1):this.answer.length<=1&&(this.$message.error("答案至少两个选项"),e=!1);break;case 3:this.$refs.simplePdTitle.getHtmlContent().length<2&&(this.$message.error("题目不能少于两个字"),e=!1);break;case 4:if(this.$refs.simpleTkTitle.getHtmlContent().length<2)this.$message.error("题目不能少于两个字"),e=!1;else if(this.tiankongAnswer.length<=0)this.$message.error("至少有一个填空项"),e=!1;else{this.tiankongAnswer.some(function(e,t,s){return""==e.content})&&(this.$message.error("填空项内容不能为空"),e=!1)}break;case 5:this.$refs.simpleJdTitle.getHtmlContent().length<2?(this.$message.error("题目不能少于两个字"),e=!1):""==this.answer&&(this.$message.error("请输入答案"),e=!1);break;default:this.$refs.simpleZhTitle.getHtmlContent().length<2?(this.$message.error("题目不能少于两个字"),e=!1):7==this.queType&&this.fileList.length<=0?(this.$message.error("请上传音频文件"),e=!1):this.complexQues.length<1?(this.$message.error("至少有一道小题"),e=!1):(this.setComplexVal(),this.complexQues.forEach(function(t){if(t.title.length<2)return this.$message.error("小题题目不能少于两个字"),void(e=!1);switch(t.type){case"1":t.options.some(function(e){return""==e})?(this.$message.error("选择题选项不能为空"),e=!1):""==t.answer&&(this.$message.error("请设置单选题的答案"),e=!1);break;case"2":t.options.some(function(e){return""==e})&&(this.$message.error("选择题选项不能为空"),e=!1),t.answer.length<=1&&(this.$message.error("多选题答案至少两个选项"),e=!1);break;case"4":if(t.answer.length<=0)this.$message.error("填空题至少有一个填空项"),e=!1;else t.answer.some(function(e,t,s){return""==e.content})&&(this.$message.error("填空项内容不能为空"),e=!1);break;case"5":""==t.answer&&(this.$message.error("请输入简答题答案"),e=!1)}}.bind(this)))}return e},resetQue:function(e){this.$refs.quesContainer.scrollTop=0,1==e||2==e?(this.selectOptions=["","","",""],this.$refs.simpleXzTitle.clearContent(),this.$refs.option.forEach(function(e){e.clearContent()})):3==e?(this.pdAnswer="1",this.$refs.simplePdTitle.clearContent()):4==e?(this.tiankongTitle="",this.$refs.simpleTkTitle.clearContent()):5==e?(this.$refs.simpleJdTitle.clearContent(),this.$refs.jsAnswer.clearContent()):(this.$refs.simpleZhTitle.clearContent(),this.complexQues=[],this.fileList=[]),this.answer="",this.score="2",this.category="",this.level=1,this.$refs.analysis.clearContent()},editOneQue:function(e){var t=this.previewQues[e];1==this.queType||2==this.queType?(this.$refs.simpleXzTitle.setHtmlContent(t.title),this.selectOptions=t.options,this.selectOptions.forEach(function(e,t){this.$refs.option[t].setHtmlContent(e)}.bind(this)),this.answer=t.answer):3==this.queType?(this.$refs.simplePdTitle.setHtmlContent(t.title),this.pdAnswer=this.previewQues[e].answer):4==this.queType?(this.$refs.simpleTkTitle.setHtmlContent(t.title),this.tiankongTitle=t.title,this.tiankongAnswer.forEach(function(e,s){e.content=t.answer[s].content}.bind(this))):5==this.queType?(this.$refs.simpleJdTitle.setHtmlContent(t.title),this.$refs.jsAnswer.setHtmlContent(t.answer),this.answer=t.answer):this.queType>5&&(this.$refs.simpleZhTitle.setHtmlContent(t.title),this.complexQues=[],7==this.queType&&this.fileList.push(t.file),setTimeout(function(){t.complexQues.forEach(function(e){this.complexQues.push(e)}.bind(this))}.bind(this),500)),this.queType<6&&(this.score=t.score,this.level=t.level,this.category=t.category,this.$refs.analysis.setHtmlContent(t.analysis)),this.editIndex=e},updateQue:function(e){this.previewQues=[],this.previewQues.push(e)},categoryParent:function(e,t){this.categoryShowName=t,this.categoryShowId=e},getTestQuesType:function(){var e=this;Object(p.b)("/testques/testquestype/getTestquesTypeApply").then(function(t){200===t.data.code?(e.testQuesTypeDropDownList=t.data.data,e.queTypeId=e.testQuesTypeDropDownList[0].id,e.queType=parseInt(e.testQuesTypeDropDownList[0].parentId)-1e3):e.$message({message:t.message,type:"error"})}).catch(function(e){console.log(e)})},queTypeIdChange:function(e){var t=!0,s=!1,i=void 0;try{for(var a,o=n()(this.testQuesTypeDropDownList);!(t=(a=o.next()).done);t=!0){var r=a.value;if(r.id==this.queTypeId){this.queType=parseInt(r.parentId)-1e3,this.testId=r.id;break}}}catch(e){s=!0,i=e}finally{try{!t&&o.return&&o.return()}finally{if(s)throw i}}},removeSmallQue:function(e){this.complexQues.splice(e,1)},downQues:function(e){var t=this.complexQues.splice(e,1)[0];this.complexQues.splice(e+1,0,t)},upQues:function(e){var t=this.complexQues.splice(e,1)[0];this.complexQues.splice(e-1,0,t)}},computed:{tiankongAnswer:function(){for(var e=new Array,t=this.tiankongTitle.split("_____").length-1,s=0;s<t;s++)e.push({index:s+1,content:""});return e},categoryShow:function(){return this.category.name?this.category.name:"选择分类"},complexScore:function(){var e=0;return this.complexQues.length>0&&this.complexQues.forEach(function(t){e+=Number(t.score)}),e}},watch:{queType:function(e,t){this.resetQue(t),this.previewQues=[]},previewQues:function(e,t){console.log(e),console.log(t)}},mounted:function(){this.areaHeight=window.innerHeight-100+"px"},created:function(){this.getTestQuesType()}},h={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"filter"},[e._v("\n      试题分类："),s("el-button",{attrs:{size:"mini"},on:{click:e.showClassesBox}},[e._v(e._s(e.categoryShowName))]),e._v(" "),s("label",[e._v("题型：")]),e._v(" "),s("el-select",{staticStyle:{width:"120px"},attrs:{size:"mini"},on:{change:e.queTypeIdChange},model:{value:e.queTypeId,callback:function(t){e.queTypeId=t},expression:"queTypeId"}},e._l(e.testQuesTypeDropDownList,function(e){return s("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),e._v(" "),s("label",[e._v("难度：")]),e._v(" "),s("el-select",{staticStyle:{width:"120px"},attrs:{size:"mini"},model:{value:e.level,callback:function(t){e.level=t},expression:"level"}},e._l(e.levels,function(e){return s("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),e._v(" "),s("label",{directives:[{name:"show",rawName:"v-show",value:4==e.queType,expression:"queType==4"}]},[e._v("主/客观：")]),e._v(" "),s("el-select",{directives:[{name:"show",rawName:"v-show",value:4==e.queType,expression:"queType==4"}],staticStyle:{width:"120px"},attrs:{size:"mini"},model:{value:e.diffType,callback:function(t){e.diffType=t},expression:"diffType"}},[s("el-option",{attrs:{value:1,label:"客观题"}}),e._v(" "),s("el-option",{attrs:{value:2,label:"主观题"}})],1)],1),e._v(" "),s("div",{staticClass:"editQue",staticStyle:{"overflow-y":"scroll"},style:"height:"+e.areaHeight},[s("div",{ref:"quesContainer",staticClass:"quesContainer ques-title-small"},[s("div",{directives:[{name:"show",rawName:"v-show",value:1==e.queType||2==e.queType,expression:"queType==1 || queType==2"}],staticStyle:{width:"100%",position:"relative"}},[s("UE",{ref:"simpleXzTitle",attrs:{ueditorConfig:e.defaultSet}}),e._v(" "),s("ul",{staticClass:"optionList"},e._l(e.selectOptions,function(t,i){return s("li",{key:i},[s("div",{staticClass:"optionIndex",style:2==e.queType?"border-radius:0":""},[e._v(e._s(String.fromCharCode(i+65)))]),e._v(" "),s("div",{staticClass:"optionContent"},[s("UE",{ref:"option",refInFor:!0,attrs:{ueditorConfig:e.defaultSet,defaultContent:t}})],1),e._v(" "),s("i",{staticClass:"el-icon-delete",attrs:{title:"删除"},on:{click:function(t){return e.removeOption(i)}}})])}),0),e._v(" "),s("div",{staticClass:"addOption"},[s("el-button",{attrs:{plain:"",type:"primary"},on:{click:e.addOneQuestion}},[e._v("添加选项")])],1),e._v(" "),1==e.queType?s("div",{staticClass:"answer"},[e._v("答案：\n                    "),e._l(e.selectOptions,function(t,i){return s("span",{class:e.answer==String.fromCharCode(i+65)?"active":"",on:{click:function(t){return e.chooseOptionAnswer(i)}}},[e._v(e._s(String.fromCharCode(i+65)))])})],2):2==e.queType?s("div",{staticClass:"answer dx"},[e._v("答案：\n                    "),e._l(e.selectOptions,function(t,i){return s("span",{class:e.answer.includes(String.fromCharCode(i+65))?"active":"",on:{click:function(t){return e.chooseOptionAnswer(i)}}},[e._v(e._s(String.fromCharCode(i+65)))])})],2):e._e()],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:3==e.queType,expression:"queType==3"}]},[s("UE",{ref:"simplePdTitle",attrs:{ueditorConfig:e.defaultSet}}),e._v(" "),s("div",{staticClass:"answer"},[e._v("答案：\n                  "),s("el-radio",{attrs:{label:"1"},model:{value:e.pdAnswer,callback:function(t){e.pdAnswer=t},expression:"pdAnswer"}},[e._v("正确")]),e._v(" "),s("el-radio",{attrs:{label:"0"},model:{value:e.pdAnswer,callback:function(t){e.pdAnswer=t},expression:"pdAnswer"}},[e._v("错误")])],1)],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:4==e.queType,expression:"queType==4"}]},[s("UE",{ref:"simpleTkTitle",attrs:{ueditorConfig:e.defaultSet,tiankong:"1"},on:{setTiankong:e.setTiankongTitle}}),e._v(" "),s("div",{staticClass:"answerTk"},[s("p",[e._v("答案：")]),e._v(" "),s("ul",e._l(e.tiankongAnswer,function(t,i){return s("li",[s("div",{staticClass:"orderInx"},[e._v(e._s(i+1))]),s("el-input",{model:{value:t.content,callback:function(s){e.$set(t,"content",s)},expression:"item.content"}})],1)}),0)])],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:5==e.queType,expression:"queType==5"}]},[s("UE",{ref:"simpleJdTitle",attrs:{ueditorConfig:e.defaultSet}}),e._v(" "),s("div",{staticClass:"answer"},[s("p",[e._v("答案：")]),e._v(" "),s("div",[s("UE",{ref:"jsAnswer",attrs:{ueditorConfig:e.defaultSet,jianda:"1"},on:{setJdAnswer:e.setJdAnswer}})],1)])],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:6==e.queType||7==e.queType,expression:"queType==6 || queType==7"}]},[s("UE",{ref:"simpleZhTitle",attrs:{ueditorConfig:e.defaultSet}}),e._v(" "),7==e.queType?s("div",{staticClass:"uploadFile"},[s("span",[e._v("听力材料：")]),e._v(" "),s("div",[s("el-upload",{staticClass:"upload-demo",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","on-change":e.handleChange,"file-list":e.fileList,limit:1,accept:"audio/mp3","on-error":e.upFileError,"before-remove":e.beforeRemove}},[s("el-button",{attrs:{size:"small",plain:"",type:"primary"}},[e._v("点击上传")]),e._v(" "),s("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传MP3格式文件，且不超过2Mb")])],1)],1)]):e._e(),e._v(" "),e._l(e.complexQues,function(t,i){return s("div",{staticClass:"complexQues"},[1==t.type||2==t.type?s("div",[s("p",{staticClass:"complex-small-title"},[e._v(e._s(i+1)+". ["+e._s(1==t.type?"单选题":"多选题")+"]\n                           "),s("span",[s("i",{staticClass:"el-icon-delete margin-rigth10",attrs:{title:"删除"},on:{click:function(t){return e.removeSmallQue(i)}}}),e._v(" "),i>=e.complexQues.length-1?s("i",{staticClass:"el-icon-sort-down padding-right0",style:"color:#ccc"}):s("i",{staticClass:"el-icon-sort-down padding-right0",attrs:{title:"下移"},on:{click:function(t){return e.downQues(i)}}}),e._v(" "),s("i",i<=0?{staticClass:"el-icon-sort-up padding-left0",style:"color:#ccc"}:{staticClass:"el-icon-sort-up padding-left0",attrs:{title:"上移"},on:{click:function(t){return e.upQues(i)}}})])]),e._v(" "),s("UE",{ref:"complexQuesTitle"+i,refInFor:!0,attrs:{ueditorConfig:e.defaultSet,defaultContent:t.title}}),e._v(" "),s("ul",{staticClass:"optionList"},e._l(t.options,function(n,a){return s("li",[s("div",{staticClass:"optionIndex",style:2==t.type?"border-radius:0":""},[e._v(e._s(String.fromCharCode(a+65)))]),e._v(" "),s("div",{staticClass:"optionContent"},[s("UE",{ref:"optionComplex"+[i],refInFor:!0,attrs:{ueditorConfig:e.defaultSet,defaultContent:n}})],1),e._v(" "),s("i",{staticClass:"el-icon-delete",attrs:{title:"删除"},on:{click:function(t){return e.removeOptionComplex(i,a)}}})])}),0),e._v(" "),s("div",{staticClass:"addOption"},[s("el-button",{attrs:{plain:"",type:"primary"},on:{click:function(s){return e.addOneOptionComplex(t)}}},[e._v("添加选项")])],1),e._v(" "),1==t.type?s("div",{staticClass:"answer"},[e._v("答案：\n                            "),e._l(t.options,function(i,n){return s("span",{class:t.answer==String.fromCharCode(n+65)?"active":"",on:{click:function(s){return e.chooseOptionAnswerComplex(n,t)}}},[e._v(e._s(String.fromCharCode(n+65)))])})],2):2==t.type?s("div",{staticClass:"answer dx"},[e._v("答案：\n                            "),e._l(t.options,function(i,n){return s("span",{class:t.answer.includes(String.fromCharCode(n+65))?"active":"",on:{click:function(s){return e.chooseOptionAnswerComplex(n,t)}}},[e._v(e._s(String.fromCharCode(n+65)))])})],2):e._e()],1):e._e(),e._v(" "),3==t.type?s("div",[s("p",{staticClass:"complex-small-title"},[e._v(e._s(i+1)+". [判断题]\n                           "),s("span",[s("i",{staticClass:"el-icon-delete margin-rigth10",attrs:{title:"删除"},on:{click:function(t){return e.removeSmallQue(i)}}}),e._v(" "),i>=e.complexQues.length-1?s("i",{staticClass:"el-icon-sort-down padding-right0",style:"color:#ccc"}):s("i",{staticClass:"el-icon-sort-down padding-right0",attrs:{title:"下移"},on:{click:function(t){return e.downQues(i)}}}),e._v(" "),s("i",i<=0?{staticClass:"el-icon-sort-up padding-left0",style:"color:#ccc"}:{staticClass:"el-icon-sort-up padding-left0",attrs:{title:"上移"},on:{click:function(t){return e.upQues(i)}}})])]),e._v(" "),s("UE",{ref:"complexQuesTitle"+i,refInFor:!0,attrs:{ueditorConfig:e.defaultSet,defaultContent:t.title}}),e._v(" "),s("div",{staticClass:"answer"},[e._v("答案：\n                          "),s("el-radio",{attrs:{label:"1"},model:{value:t.answer,callback:function(s){e.$set(t,"answer",s)},expression:"item.answer"}},[e._v("正确")]),e._v(" "),s("el-radio",{attrs:{label:"0"},model:{value:t.answer,callback:function(s){e.$set(t,"answer",s)},expression:"item.answer"}},[e._v("错误")])],1)],1):e._e(),e._v(" "),4==t.type?s("div",[s("p",{staticClass:"complex-small-title"},[e._v(e._s(i+1)+". [填空题]\n                           "),s("span",[s("i",{staticClass:"el-icon-delete margin-rigth10",attrs:{title:"删除"},on:{click:function(t){return e.removeSmallQue(i)}}}),e._v(" "),i>=e.complexQues.length-1?s("i",{staticClass:"el-icon-sort-down padding-right0",style:"color:#ccc"}):s("i",{staticClass:"el-icon-sort-down padding-right0",attrs:{title:"下移"},on:{click:function(t){return e.downQues(i)}}}),e._v(" "),s("i",i<=0?{staticClass:"el-icon-sort-up padding-left0",style:"color:#ccc"}:{staticClass:"el-icon-sort-up padding-left0",attrs:{title:"上移"},on:{click:function(t){return e.upQues(i)}}})])]),e._v(" "),s("UE",{attrs:{ueditorConfig:e.defaultSet,tiankong:"1",itemInx:i,defaultContent:t.title},on:{setTiankong:e.setTiankongTitle}}),e._v(" "),s("div",{staticClass:"answerTk"},[s("p",[e._v("答案：")]),e._v(" "),s("ul",e._l(t.answer,function(t,i){return s("li",[s("div",{staticClass:"orderInx"},[e._v(e._s(i+1))]),e._v(" "),s("el-input",{model:{value:t.content,callback:function(s){e.$set(t,"content",s)},expression:"item2.content"}})],1)}),0)]),e._v(" "),s("el-radio",{staticClass:"radio-complex",attrs:{label:2},model:{value:t.diffType,callback:function(s){e.$set(t,"diffType",s)},expression:"item.diffType"}},[e._v("主观题")]),e._v(" "),s("el-radio",{staticClass:"radio-complex",attrs:{label:1},model:{value:t.diffType,callback:function(s){e.$set(t,"diffType",s)},expression:"item.diffType"}},[e._v("客观题")])],1):e._e(),e._v(" "),5==t.type?s("div",[s("p",{staticClass:"complex-small-title"},[e._v(e._s(i+1)+". [简答题]\n                          "),s("span",[s("i",{staticClass:"el-icon-delete margin-rigth10",attrs:{title:"删除"},on:{click:function(t){return e.removeSmallQue(i)}}}),e._v(" "),i>=e.complexQues.length-1?s("i",{staticClass:"el-icon-sort-down padding-right0",style:"color:#ccc"}):s("i",{staticClass:"el-icon-sort-down padding-right0",attrs:{title:"下移"},on:{click:function(t){return e.downQues(i)}}}),e._v(" "),s("i",i<=0?{staticClass:"el-icon-sort-up padding-left0",style:"color:#ccc"}:{staticClass:"el-icon-sort-up padding-left0",attrs:{title:"上移"},on:{click:function(t){return e.upQues(i)}}})])]),e._v(" "),s("UE",{ref:"complexQuesTitle"+i,refInFor:!0,attrs:{ueditorConfig:e.defaultSet,defaultContent:t.title}}),e._v(" "),s("div",{staticClass:"answer"},[s("p",[e._v("答案：")]),e._v(" "),s("div",[s("UE",{attrs:{ueditorConfig:e.defaultSet,jianda:"1",itemInx:i,defaultContent:t.answer},on:{setJdAnswer:e.setJdAnswer}})],1)])],1):e._e(),e._v(" "),s("div",{staticClass:"analysis"},[s("span",[e._v("解析：")]),e._v(" "),s("div",[s("UE",{ref:"analysisComplex",refInFor:!0,attrs:{ueditorConfig:e.defaultSet,defaultContent:t.analysis}})],1)]),e._v(" "),s("div",{staticClass:"score"},[e._v("分值：  \n                        "),s("el-input",{staticStyle:{width:"60px"},attrs:{type:"number",min:"1",max:"100"},on:{change:function(s){return e.scoreChange(t)}},model:{value:t.score,callback:function(s){e.$set(t,"score",s)},expression:"item.score"}}),e._v(" 分\n                    ")],1)])}),e._v(" "),s("div",{staticClass:"save"},[s("el-button",{attrs:{plain:"",type:"primary"},on:{click:function(t){e.showAddSmallQue=!0}}},[e._v("添加小题")])],1)],2),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:6!=e.queType&&7!=e.queType,expression:"queType!=6 && queType!=7"}]},[s("div",{staticClass:"analysis"},[s("span",[e._v("解析：")]),e._v(" "),s("div",[s("UE",{ref:"analysis",attrs:{ueditorConfig:e.defaultSet}})],1)])]),e._v(" "),s("div",{staticClass:"score"},[e._v("分值： \n              "),6==e.queType||7==e.queType?s("span",[e._v(e._s(e.complexScore))]):s("el-input",{staticStyle:{width:"60px","margin-left":"6px"},attrs:{type:"number",min:"1",max:"100"},on:{change:e.scoreChange},model:{value:e.score,callback:function(t){e.score=t},expression:"score"}}),e._v(" 分\n            ")],1),e._v(" "),s("div",{staticClass:"save"},[s("el-button",{attrs:{plain:"",type:"primary"},on:{click:e.saveOneQuestion}},[e._v("保存试题")])],1)])]),e._v(" "),s("div",{staticClass:"viewQue",staticStyle:{"overflow-y":"scroll"},style:"height:"+e.areaHeight},[s("p",{staticClass:"ques-title-small"},[e._v("试题展示")]),e._v(" "),s("Quesview",{attrs:{viewData:e.previewQues}})],1),e._v(" "),s("AddSmallQues",{attrs:{dialogVisible:e.showAddSmallQue},on:{closeDiolog:e.closeDiolog,addUnitQue:e.addUnitQue}}),e._v(" "),s("category",{ref:"cg",on:{"category-parent":e.categoryParent}})],1)},staticRenderFns:[]},v=s("VU/8")(d,h,!1,null,null,null);t.a=v.exports}});
//# sourceMappingURL=1.e5733061ebf7b2253e62.js.map